import { API, version } from './environment'
//  API Mutators are wrapped with async middleware
import { requestAsync, mutateAsync } from 'redux-query'
import { plural, singular } from 'pluralize'

/* *****
GET (ALL)
***** */
const get = (model, id) => ({
  url: `${API}/${version}/${model}/${id}`,
  options: { method: 'GET', dataType: 'jsonp' },
  transform: res => ({ [singular(model)]: res }),
  update: { [singular(model)]: (prev, next) => next }
})

const getAll = (model) => ({
  url: `${API}/${version}/${model}`,
  options: { method: 'GET', dataType: 'jsonp' },
  transform: res => ({ [plural(model)]: res }),
  update: { [plural(model)]: (prev, next) => next }
})

export default {
  get,
  getAll
}
